<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VSC_Snippets</title>
    <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css">
    <link rel="stylesheet" href="plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
    <link rel="stylesheet" href="plugins/select2/css/select2.min.css">
    <link rel="stylesheet" href="plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">
    <link rel="stylesheet" href="dist/css/adminlte.css">
    <link rel="stylesheet" href="dist_L/jsonedit/jsonedit.css">

</head>

<body class="layout-top-nav">
    <div class="wrapper">
        <nav class="main-header navbar navbar-expand-lg navbar-dark">
            <a href="#" class="navbar-brand">
                <img src="dist_L/logo/L3.png" alt="L Logo" class="brand-image elevation-3"
                    style="opacity: .8;margin-right: -20px;">
                <span class="brand-text font-weight-light">andini &bs VSCode Snippets generator</span>
                
            </a>
        </nav>
        <div class="content-wrapper">
            <section class="content-header">
            </section>
            <section class="content">
                <div class=" container-fluid">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card card-primary">
                                <div class=" card-header">
                                    <h3 class=" card-title">Snippets form</h3>
                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="maximize"><i
                                                class="fas fa-expand"></i></button>
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i
                                                class="fas fa-minus"></i></button>
                                        <button type="button" class="btn btn-tool" data-card-widget="remove"><i
                                                class="fas fa-times"></i></button>
                                    </div>
                                </div>
                                <form role="form">
                                    <div class=" card-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>Name</label>
                                                    <input name="name" type="text" class="form-control"
                                                        placeholder="Enter Name ...">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>Prefix</label>
                                                    <input type="text" name="prefix" class="form-control"
                                                        placeholder="Enter prefix...">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>Scope</label>
                                                    <div class="select2-primary">
                                                        <select id="scope" class="select2bs4" multiple="multiple"
                                                            data-placeholder="Select a scope" style="width: 100%;">
                                                            <option>PHP</option>
                                                            <option>JavaScript</option>
                                                            <option>HTML</option>
                                                            <option>MySql</option>
                                                            <option>VisualBasic</option>
                                                            <option>Perl</option>
                                                            <option>CSS</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>Description</label>
                                                    <input name="description" type="text" class="form-control"
                                                        placeholder="Enter description...">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>Variables</label>
                                                    <select id="variables" class="form-control">
                                                        <option value=""></option>
                                                        <option>TM_SELECTED_TEXT</option>
                                                        <option>TM_CURRENT_LINE</option>
                                                        <option>TM_CURRENT_WORD</option>
                                                        <option>TM_LINE_INDEX</option>
                                                        <option>TM_LINE_NUMBER</option>
                                                        <option>TM_FILENAME</option>
                                                        <option>TM_FILENAME_BASE</option>
                                                        <option>TM_DIRECTORY</option>
                                                        <option>TM_FILEPATH</option>
                                                        <option>CLIPBOARD</option>
                                                        <option>WORKSPACE_NAME</option>
                                                        <option>CURRENT_YEAR</option>
                                                        <option>CURRENT_YEAR_SHORT</option>
                                                        <option>CURRENT_MONTH</option>
                                                        <option>CURRENT_MONTH_NAME</option>
                                                        <option>CURRENT_MONTH_NAME_SHORT</option>
                                                        <option>CURRENT_DATE</option>
                                                        <option>CURRENT_DAY_NAME</option>
                                                        <option>CURRENT_DAY_NAME_SHORT</option>
                                                        <option>CURRENT_HOUR</option>
                                                        <option>CURRENT_MINUTE</option>
                                                        <option>CURRENT_SECOND</option>
                                                        <option>CURRENT_SECONDS_UNIX</option>
                                                        <option>BLOCK_COMMENT_START</option>
                                                        <option>BLOCK_COMMENT_END</option>
                                                        <option>LINE_COMMENT</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <div class="btn-group">
                                                        <a id="addTab" class="btn btn-app">
                                                            <i class="fas fa-play"></i> Add Tab
                                                        </a>
                                                        <a id="resetTab" class="btn btn-app">
                                                            <span class="badge bg-warning">0</span>
                                                            <i class="fas fa-bullhorn"></i> Reset Tab
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">

                                                <div class="form-group">
                                                    <label>Body</label>
                                                    <textarea name="body" id="bodyCode" class="form-control" rows="4"
                                                        placeholder="Snippet here ..."></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card-footer">
                                        <button id="doit" type="button" class="btn btn-primary">Add</button>
                                        <a id="clear" href="index.html" type="submit" class="btn btn-warning">clear</a>
                                    </div>
                                </form>

                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card card-success">
                                <div class=" card-header">
                                    <h3 class=" card-title">Snippets result</h3>
                                </div>
                                <div class="card-body">
                                    <div class="col-12">
                                        <textarea id="jsonglobals" rows="4"  class="form-control" >
                                        </textarea>
                                    </div>
                                    <div>
                                        <div id="json_editor" data-role="myjson"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </div>
        <footer class="main-footer">
            <div class="float-right d-none d-sm-inline">
                Anything you want
            </div>
            <strong>Copyright &copy; 2014-2019 powered by <a href="https://adminlte.io">AdminLTE.io</a>.</strong> All
            rights reserved.
        </footer>
    </div>
    <script src="plugins/jquery/jquery.min.js"></script>
    <script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="plugins/select2/js/select2.full.min.js"></script>
    <script src="plugins/bs-custom-file-input/bs-custom-file-input.min.js"></script>
    <script src="dist/js/adminlte.min.js"></script>
    <script src="dist_L/jsonedit/jsonedit.js"></script>
    <script>
        var snippet={};
        $(function () {
            $('.select2bs4').select2();

            $("#addTab").on('click', function () {
                var c = counter();
                var txtToAdd = "${" + c + ":example}";
                var s = 3 + c.toString().length
                addVar(txtToAdd, s, 7);
            });
            $("#resetTab").on('click', function () {
                counter(true);
            })
            $('#variables').on('change', function () {
                var txtToAdd = "$" + $(this).val();
                addVar(txtToAdd, txtToAdd.length, 0);
            })
            $('#doit').on('click', function () {
                doJsonCode();
            })

        })
        function addVar(txtToAdd, s, e) {
            var $txt = $("#bodyCode");
            var caretPos = $txt[0].selectionStart;
            var textAreaTxt = $txt.val();
            $txt.val(textAreaTxt.substring(0, caretPos) + txtToAdd + textAreaTxt.substring(caretPos));
            $txt[0].selectionStart = caretPos + s;
            $txt[0].selectionEnd = $txt[0].selectionStart + e;
            $txt.focus();
        };
        function counter(r = false) {
            var $badge = $('#resetTab > .badge');
            var count = Number($badge.text()) + 1;
            if (r) count = 0;
            $badge.text(count);
            return count;
        }
        function doJsonCode() {
            
            o=(jsonObje())
            json_editor('json_editor', JSON.stringify(o));
            $('#jsonglobals').text(JSON.stringify(o))
            console.log(JSON.stringify(o));
        }
        function jsonObje(){
            var snp = {};
            snp["description"] = $("input[name=description]").val();
            snp["body"] = $("#bodyCode").val();
            snp["prefix"] = $("input[name=prefix]").val();
            snp["scope"] = $("#scope").val();
            
            snippet[$("input[name=name]").val()] = snp;
            return snippet;
        }
    </script>
</body>

</html>